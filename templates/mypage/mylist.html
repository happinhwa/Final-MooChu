{% extends 'base_my.html' %}
{% block title %}mypage{% endblock %}
{% load static %}
{% block content %}
<div class="bookcover">
<div class="bookdot">
  <div class="page">
                              <!-- 왼쪽 프로필 페이지 구성요소 -->
    {% include "mypage/profile.html" %}
    <div class="content-container">
                              <!-- 오른쪽 페이지 상단 글씨  -->
      <div class="header content-title">
        <div class="content-title-name">"남도일"님의 마이페이지</div>
      </div>
      <div class="box content-box">
        <div class="scroll-box">
          <div class="box-title">"남도일" 님의 찜 리스트 ~</div>
          
            <!-- 찜 목록 리스트 표시 -->
            <div class="poster-container">
              {% if mylist %}
              {% for media in mylist %}    
              <div class="card">
                <img class="card-img" src="{{ media.media_poster.url }}" alt="영화 포스터" title="{{ media.media_title }}">
                <span class="card-text">{{ media.media_title}}</span>
              </div>
              {% endfor %}
              {% else %}
              <h3> "{{ master.nickname }}"님의 찜 목록이 존재하지 않습니다.</h3>
              {% endif %}
            </div> 
        </div>
      </div>
    </div>
    <!-- 메뉴 버튼 구성 요소-->
    {% include "mypage/menu.html" %}
  </div>
</div>
</div>
{% endblock %}
<script>
  // 모든 card-text 요소에 대해 처리
  const cardTexts = document.querySelectorAll('.card-text');
  cardTexts.forEach((cardText) => {
    const text = cardText.textContent;
    const maxLength = 10; // 최대 길이 설정
    if (text.length > maxLength) {
      const truncatedText = text.substring(0, maxLength) + '...';
      cardText.textContent = truncatedText;
      cardText.addEventListener('click', function () {
        if (cardText.textContent === truncatedText) {
          cardText.textContent = text;
        } else {
          cardText.textContent = truncatedText;
        }
      });
    }
  });
</script>