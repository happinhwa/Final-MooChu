{% extends 'base_my.html' %}
{% block title %}mypage{% endblock %}
{% load static %}

{% block content %}
<div class="bookcover">
  <div class="bookdot">
    <div class="page">

                <!-- 왼쪽 프로필 페이지 구성요소 -->
                {% include "mypage/profile.html" %}


          <div class="content-container">
                            <!-- 오른쪽 페이지 상단 글씨  -->
            <div class="header content-title">
              <div class="content-title-name">"{{ user.nickname }}"님의 마이페이지</div>
            </div>
                            <!-- 오른쪽 페이지 구성 -->
            <div class="box content-box">
              <div class="scroll-box">
                <div class="box-title">인생 명작 TOP 5</div>
                <div class="poster-container">
                  <a href="#"><img class="poster-img" src="/static/images/2.jpeg" ></a>
                  <a href="#"><img class="poster-img" src="/static/images/3.jpeg" ></a>
                  <a href="#"><img class="poster-img" src="/static/images/4.jpeg" ></a>
                  <a href="#"><img class="poster-img" src="/static/images/5.jpeg" ></a>
                  <a href="#"><img class="poster-img" src="/static/images/6.jpeg" ></a>
                </div>
                <br />
                <br />
                
                <div class="box-right-flex">
                  <div class="news-flex-box">
                    <div class="news-box">
                      <div class="follow-title"> 팔로워 LIST</div>
                      {% if follower %}
                      {% for follow in follower%}
                      <div class="news-row">
                        <div>
                          <img class="follow-img" src="{{follow.follower.profile_img.url }}">
                          <a href="{% url 'mypage:home' nickname=follow.follower.nickname %}"> {{ follow.follower.nickname }}</a>
                          {% if follow.follower == writer or writer == master %}
                          <form id="delete-button" data-url="{% url 'mypage:follower' follow_id=follow.id %}" method="delete">
                            {% csrf_token %}
                            <button class="follow-btn" type="delete-button">팔로우 취소</button>
                          </form>
                          {% endif %}
                        </div>
                      </div>
                      {% endfor %}
                      {% else %}
                      <div>
                        <h3> 팔로워 목록이 없습니다.</h3>
                      </div>
                      {% endif %}
    
                    </div>
                    <div class="update-box">
                      <div class="follow-title"> 팔로잉 LIST</div>
                      {% if following %}
                      {% for follow in following%}
                      <div class="menu-row">
                        <div>
                          <img class="follow-img" src="{{follow.following.profile_img.url }}">
                          <a href="{% url 'mypage:home' nickname=follow.following.nickname %}"> {{ follow.following.nickname }}</a>
                          {% if follow.following == writer or writer == master%}
                          <form id="delete-button" data-url="{% url 'mypage:follower' follow_id=follow.id %}" method="delete">
                            {% csrf_token %}
                            <button class="follow-btn" type="delete-button">팔로우 취소</button>
                          </form>
                          {% endif %}
                        </div>
                      </div>
                      {% endfor %}
                      {% else %}
                      <div>
                        <h3> 팔로잉 목록이 없습니다.</h3>
                      </div>
                      {% endif %}
            
                    </div>
                    
                  </div>
                </div>
                
                
              </div>
            </div>
          </div>
                    <!-- 메뉴 버튼 구성 요소-->
                    {% include "mypage/menu.html" %}

        </div>
                <!-- 메뉴 버튼 구성 요소-->
                {% include "mypage/menu.html" %}

    </div>
<<<<<<< HEAD
  </body>
  
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $('#delete-button').submit(function(e) {
      e.preventDefault(); // Prevent the default form submission
      
      var form = $(this);
      var url = form.data('url');
      
      $.ajax({
        url: url,
        type: 'DELETE',
        data: form.serialize(),
        beforeSend: function(xhr) {
          xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
        },
        success: function(response) {

          location.reload();
        },
        error: function(xhr, status, error) {

          console.error('Failed to cancel follow:', error);
        }
      });
    });
  });
</script>
</html>
```
=======
  </div>
</div>
{% endblock %}
>>>>>>> 0546c39ed2ec3f8bccdb5b89a32ab92669e8d244
