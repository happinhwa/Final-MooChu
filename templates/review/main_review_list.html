{% extends 'base.html' %}

{% block title %}
    리뷰 목록
{% endblock %}


{% block content %}
<style>
.reviews {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white;
}

.reviews h1 {
  text-align:center;
  color:white;
}
.box {
    width: 700px;
    height: 400px;
    border: 2px solid #FCA472;
    padding: 20px;
    margin: 50px auto;
    display: block; 
}
</style>

<div class="reviews h1">
<h1>리뷰 목록</h1>
</div>

<div class="reviews">
{% if reviews %}
    <ul>
    {% for review in reviews %}
        <div class="review box">
            <h3>작성자: {{ review.user.username }}</h3>
            <p>평점: {{ review.vote }}</p>
            <p>작성일: {{review.timestamp }}</p>
            <p>리뷰 내용:</p>
            <p>{{ review.review |truncatechars:30 }}<a href="{% url 'review:main_review_detail' review_id=review.pk %}">...더보기</a></p>
            <hr>
            <a href="{% url 'review:main_review_detail' review_id=review.pk %}" class="btn btn-primary">
                댓글 {{ review.comments.count }}
            </a>
        </div>
    {% endfor %}
    </ul>
{% else %}
        <p>아직 작성된 리뷰가 없습니다.</p>
{% endif %}
</div>

{% endblock %}

{% block script %}
<script type='text/javascript'>
    const recommend_elements = document.getElementsByClassName("recommend");
    Array.from(recommend_elements).forEach(function(element) {
        element.addEventListener('click', function() {
            if(confirm("이 리뷰에 좋아요를 누르시겠습니까?")) {
                location.href = this.dataset.uri;
            };
        });
    });
</script>
{% endblock %}