{% extends 'base.html' %}
{% load static %}

{% block title %}
 {{ movie.title_kr }}이 작품, 어떠셨나요?
{% endblock %}



{% block content %}
<style>
.reviews {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white;
}

.reviews h1 {
  text-align:center;
  color:white;
}

.box {
    width: 500px;
    height: 400px;
    border: 2px solid #FCA472;
    padding: 20px;
    margin: 20px auto;
    display: block; 
}

/* styles.css */
.rating {
    display: inline-block;
    font-size: 0;
    cursor: pointer;
}
  
.star {
    display: inline-block;
    width: 30px;
    height: 30px;
    background-image: url("{% static 'empty_star.png' %}");
    background-size: contain;
}
  
.filled {
    background-image: url("{% static 'star.png' %}");
}

.container{
    font-family: 'Chonburi';
    color: #FCA472;
    text-decoration: none;
    font-size: 20px;
    padding: 5px 5px;
}
/* Add this custom style to your existing CSS */
.custom-input-style {
    font-size: 2rem; /* Adjust the value as needed for the desired font size */
    color:  #FCA472; /* Replace 'blue' with your desired color */
}

/* Rest of your existing styles... */
.movie-title-wrapper {
    display: flex;
    align-items: center;
}

.movie-title {
    flex: 1;
    margin-right: 10px;
}

.movie-title-text {
    /* Add any styles for the "이 영화 어떠셨나요?" text */
}
</style>
<div class="reviews h1">
    <h1 style="font-size: 2rem; color: #FCA472;">
        <u>{{ movie.title }}</u> 이 영화 어떠셨나요?
    </h1>
    
    
 <div class="movie_rate">
        <label for="rating">평점</label>
        <div class="rating">
            <span class="star" data-value="1"></span>
            <span class="star" data-value="2"></span>
            <span class="star" data-value="3"></span>
            <span class="star" data-value="4"></span>
            <span class="star" data-value="5"></span>
        </div>  
        <input type="hidden" name="rating" id="rating" value="1">
    </div>

<div class="container">
    <h5 class="my-3 border-bottom pb-2">리뷰 작성</h5>
    <form method="post" class="post-form my-3">
        {% csrf_token %}
        {% if form.errors %}
            <div class="alert alert-danger" role="alert">
                {% for field in form %}
                    {% if field.errors %}
                        <strong>{{ field.label }}</strong>
                        {{ field.errors }}
                    {% endif %}
                {% endfor %}
            </div>
        {% endif %}
        <!-- 오류표시 End -->
        <!-- 'writer' 필드 제거: 사용자 정보는 뷰에서 처리하도록 함 -->
        <div class="form-group">
            <label for="title">제목</label>
            <input type="text" class="form-control" name="title" id="title"
                   value="{{ form.title.value|default_if_none:'' }}">
        </div>
        <div class="form-group">
            <label for="content">내용</label>
            <textarea class="form-control" name="content"
                      id="content" rows="15">{{ form.content.value|default_if_none:'' }}</textarea>
        </div> 
        <!-- 별점 입력 필드 추가 -->

        <!-- 별점 입력 필드 추가 끝 -->
        <button type="submit" class="btn btn-review" style="margin-bottom: 100px;">업로드하기</button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('rating');

    stars.forEach(star => {
        star.addEventListener('mouseover', function () {
            const value = parseFloat(star.getAttribute('data-value'));
            highlightStars(value);
        });

        star.addEventListener('click', function () {
            const value = parseFloat(star.getAttribute('data-value'));
            ratingInput.value = value;
        });

        star.addEventListener('mouseout', function () {
            const currentValue = parseFloat(ratingInput.value);
            highlightStars(currentValue);
        });
    });

    function highlightStars(value) {
        stars.forEach(star => {
            const starValue = parseFloat(star.getAttribute('data-value'));
            if (starValue <= value) {
                star.classList.add('filled');
            } else {
                star.classList.remove('filled');
            }
        });
    }
});
</script>
{% endblock %}
